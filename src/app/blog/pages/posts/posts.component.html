<app-navbar color='black'></app-navbar>

<section class='section'>
    <div class='container'>
        <h1 class='title is-8'>Latest Articles</h1>

        <div class='columns is-centered'>
            <div class='column is-one-fifth'>
                <aside class='menu'>
                    <p class='menu-label'>Categories</p>
                    <ul class='menu-list'>
                        <li *ngFor='let c of categories | async'>
                            <a [routerLink]="['category', c.title]">{{ c.title }}</a>
                        </li>
                    </ul>
                    <p class='menu-label is-hidden-mobile'>Tags</p>
                    <ul class='menu-list is-hidden-mobile'>
                        <li *ngFor='let t of tags | async'>
                            <a [routerLink]="['tag', t.slug.current]">{{ t.title | titlecase }}</a>
                        </li>
                    </ul>
                </aside>
            </div>

            <div class='column is-three-fifths'>
                <article class='card' *ngFor='let p of posts | async'>
                    <div class='card-image'>
                        <a [routerLink]="['article', p.slug.current]">
                            <figure class='image'>
                                <img class='post-media' [src]='p.mainImage.asset.url + "?h=500"' [alt]='p.title'>
                            </figure>
                        </a>
                    </div>

                    <div class="card-content">
                        <div class="media">
                            <div class="media-content">
                                <p>
                                    <a class="title is-4 split-text" [routerLink]="['article', p.slug.current]">
                                        <span>{{ p.title }}</span>
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </p>
                                <p>
                                    <a class="subtitle is-6" [routerLink]="['author', p.author.slug.current]">
                                        {{ p.author.name }}
                                    </a>
                                </p>
                            </div>
                        </div>

                        <div class="content">
                            <p class='subtitle is-6'>
                                {{ p.excerpt }}
                                <br />
                            </p>
                            <time class='subtitle is-6' [dateTime]="p.publishedAt">
                                {{ p.publishedAt | date:'mediumDate' }}
                            </time>
                            <br /><br />
                            <p>
                                <a class='subtitle is-7 has-text-grey' *ngFor='let t of p.tags; let i = index' [routerLink]="['tag', t.slug.current]">
                                    {{ t.title | titlecase }}<ng-container *ngIf='i < (p.tags.length-1)'>,</ng-container>
                                </a>
                            </p>
                        </div>
                    </div>
                </article>
            </div>

            <div class='column is-one-fifth'></div>
        </div>
    </div>
</section>